<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fashion Store SAT Solver</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap 5 CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="/static/style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container mt-4">
      <h1 class="text-center mb-4">Fashion Store SAT Solver</h1>
      <form method="post" enctype="multipart/form-data" class="mb-3">
        <div class="mb-3">
          <label for="inputfile" class="form-label"
            >Upload test input file:</label
          >
          <input
            type="file"
            class="form-control"
            name="inputfile"
            id="inputfile"
            accept=".txt"
            required
          />
        </div>
        <div class="example-inputs mb-2">
          <strong>Example input format:</strong><br />
          <code>hat red<br />coat green<br />shoes white</code>
        </div>
        <div class="test-links mb-3">
          <span>Quick test:</span>
          <button
            type="button"
            class="btn btn-outline-primary btn-sm"
            onclick="window.location.href='?test=sat_tests/test_1.txt'"
          >
            SAT Test 1
          </button>
          <button
            type="button"
            class="btn btn-outline-primary btn-sm"
            onclick="window.location.href='?test=sat_tests/test_2.txt'"
          >
            SAT Test 2
          </button>
          <button
            type="button"
            class="btn btn-outline-primary btn-sm"
            onclick="window.location.href='?test=sat_tests/test_3.txt'"
          >
            SAT Test 3
          </button>
          <button
            type="button"
            class="btn btn-outline-danger btn-sm"
            onclick="window.location.href='?test=unsat_tests/test_1.txt'"
          >
            UNSAT Test 1
          </button>
          <button
            type="button"
            class="btn btn-outline-danger btn-sm"
            onclick="window.location.href='?test=unsat_tests/test_2.txt'"
          >
            UNSAT Test 2
          </button>
        </div>
        <button class="btn btn-primary w-100" type="submit">Solve</button>
      </form>
      {% if status %}
      <div class="section mt-4">
        <h2 class="h5">Result</h2>
        {% if status == "SATISFIABLE" %}
        <span class="badge bg-success mb-2">SATISFIABLE</span>
        {% elif status == "UNSATISFIABLE" %}
        <span class="badge bg-danger mb-2">UNSATISFIABLE</span>
        {% endif %} {% if selected and status == "SATISFIABLE" %}
        <div class="mt-2">
          <strong>Selected Garments:</strong>
          <table
            class="table table-bordered table-sm align-middle mt-2"
            style="max-width: 400px"
          >
            <thead class="table-light">
              <tr>
                <th>Type</th>
                <th>Color</th>
              </tr>
            </thead>
            <tbody>
              {% for item in selected %} {% set parts = item.split('_', 1) %}
              <tr>
                <td>{{ parts[0]|capitalize }}</td>
                <td>
                  {% if parts|length > 1 %}
                  <span
                    class="badge rounded-pill"
                    style="background-color: '{{ parts[1] }}'; color: #222; min-width: 60px;"
                  >
                    {{ parts[1]|capitalize }}
                  </span>
                  {% else %}
                  <span
                    class="badge rounded-pill bg-secondary"
                    style="min-width: 60px"
                  ></span>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endif %}
        <button
          class="btn btn-link p-0"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#rawOutput"
          aria-expanded="false"
          aria-controls="rawOutput"
        >
          Show raw SAT output
        </button>
        <div class="collapse" id="rawOutput">
          <div class="result mt-2">{{ result }}</div>
        </div>
      </div>
      {% endif %}
    </div>
    <div class="footer">
      &copy; {{ 2025 }} Fashion Store SAT Solver &mdash;
      <a href="https://github.com/" target="_blank">GitHub</a>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
